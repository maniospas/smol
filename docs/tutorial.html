<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Smoλ is a low-level language with fast zero-cost abstractions that are organized into failsafe services.">
  <meta name="keywords" content="smolambda, low-level language, smoλ, programming language, runtype, safe language, systems programming, DSL">
  <meta name="author" content="Emmanouil (Manios) Krasanakis">
  <meta name="robots" content="index, follow">


  <title>smoλ</title>
  <link href="vendor/prism/prism.min.css" rel="stylesheet" />
  <style>
    html {scroll-behavior: smooth;}
    h1 {scroll-margin-top: 60px;}
    h2 {scroll-margin-top: 60px;}
    h3 {scroll-margin-top: 60px;}
    h1[id], h2[id], h3[id] { position: relative; }
    .anchor-link {text-decoration: none;font-size: 0.9em;margin-left: 8px;opacity: 0;transition: opacity 0.2s;}
    h1:hover .anchor-link,
    h2:hover .anchor-link,
    h3:hover .anchor-link { opacity: 1; }

    body {font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;margin: 0;background-color: #f9f9f9;color: #333;line-height: 1.7;}
    .navbar {background-color: #333;padding: 2px;position: sticky;top: 0;z-index: 1000;display: flex;flex-wrap: wrap;justify-content: center;}
    .navbar a {color: white;text-decoration: none;padding: 5px 10px;font-weight: bold;}
    .navbar a:hover {background-color: #555;}
    .container {max-width: 800px;margin: 40px auto;padding: 0 20px;}
    h1, h2, h3 {color: #222;}
    table {width: 100%;border-collapse: collapse;margin-bottom: 2em;background-color: white;}
    th, td {border: 1px solid #ccc;padding: 10px;text-align: left;vertical-align: top;}
    th {background-color: #eee;}
    code {background: #eee;padding: 2px 0px;border-radius: 4px;font-family: 'Courier New', Courier, monospace;font-size: 95%;}
    pre {background: #272822;padding: 15px;border-radius: 8px;overflow-x: auto;font-size: 90%;margin-bottom: 2em;}
    pre code {background: none;font-family: 'Courier New', Courier, monospace;font-size: 90%;}
    p strong {color: #444;}
    .section-header {background-color: #eeb;font-weight: bold;color: #000;}
  </style>
</head>
<body>


<div class="navbar">
  <a href="index.html">Smoλ home</a>
  <a href="#hello-world">Hello world</a>
  <a href="#variables">Variables</a>
  <a href="#smo">Runtypes</a>
  <a href="#service">Services</a>
  <a href="#buffers">Buffers</a>
  <a href="#std">Std</a>
</div>

<div class="container">

<h1 id="hello-world">Hello world <a href="#hello-world" class="anchor-link">🔗</a></h1>

<p>
Let's take our first steps into programming with <i>smoλ</i> (pronounced like "small" but with "o" instead of "a"). 
I must mention that the language
is a bit atypical in that it simplifies a lot of traditional programming concepts while keeping the ability
to write very fast yet safe code. Some level of control is sacrificed in the process, but this means
that you do not need to worry too much about technical details.
</p>

<p>
To start using <i>smoλ</i>, download it from its <a href="https://github.com/maniospas/smol/releases/latest">latest release</a>.
Ensure that both the <i>smol</i> executable and GCC are in your system path. As an editing environment, start with VSCode
and install the smoλ (smolambda) extension to help with syntax highlighting. Once this is all set, we are ready to create and
run our first program! This tutorial will have source code followed by some terminal commands and outputs - you can run these
in the operating system terminal or one provided by VSCode.
</p>


<p>Save the file below as <i>main.s</i>. Then run <i>smol main.s</i>. This 
creates an executable file named <i>main</i> or <i>main.exe</i>; the name matches the source file
and the extension depends on your operating system. The command also runs the program right away,
so you can easily test it. Assuming that everything was set up correctly, you will see "Hello world!" print on the console.
To only create an executable, an act that is called <i>compiling</i> in all languages that support it,
run <i>smol main.s --task compile</i>. </p>


<pre><code class="language-smolambda">// main.s
@include std.builtins

service main()
    print("Hello world!")
    --
</code></pre>
<pre style="background-color: #222; color: white;">> smol main.s
Hello world!
</pre>

<p>
We will now look at the anatomy of this first program. To begin with,
we have a line comment <code class="language-smolambda">// main.s</code>.
This starts with double slash and ignores the remainder of the line. In
general, it is useful to comment code so that we can remember what we
had in mind. But take care not to write too trivial comments that would
require a lot of effort to keep up to date as your code evolves.</p>

<p>
Next, we have the <code class="language-smolambda">@include std.builtins</code>
statement. This includes the contents of the file <i>std/builtins.s</i>
in our code. If the file cannot be found in your project, it is sought out among the files accompanying
the <i>smol</i> executable. By the way, <i>std</i> is a common naming convention
to refer to the standard library of programming languages. This has a lot of common
functionalities; in our case we import some builtin operations for printing and reading
from the console, and performing basic math (additions, multiplications, etc). The
word <code class="language-smolambda">print</code> encountered later is declared
in the builtins we just imported.
</p>

<p>Now we get to the mysterious <code class="language-smolambda">service main()</code>
declaration. In <i>smoλ</i>, services are basically chunks of code that perform a designated
task. Other services can ask them to run again for some inputs.
They roughly correspond to normal functions of other programming languages, though 
they also handle certain safety details like memory and errors for you, so you do not have to 
worry about them right away (more on this stuff later).
</p>

<p>After telling the language that we want to create a service with the
<code class="language-smolambda">service</code> keyword, we set a name as
well as comma-separated arguments inside parentheses <code class="language-smolambda">()</code>. 
We will talk about arguments in a bit, but our first service has none of them. By
convention, in most languages the entry point of programs is the service/function
called <i>main</i>. In other words, our program is just a call to the <i>main</i> service, 
which executes all the commands found there.</p>

<p>Now we get to the juicy part; the actual code we are running inside our services!
Basically everything else is preparation for allowing us to write said code.
We have two lines of code. Of these, <code class="language-smolambda">print("Hello world!")</code> 
calls <code class="language-smolambda">print</code> with a string (that is, text inside quotation marks)
argument. You will notice that I deliberately avoided calling <i>print</i> a service; it could be but
it's something a bit different and even more lightweight: something that the language calls <i>runtype</i>. 
For now, let's skip the specifics and focus on the last line of code: <code class="language-smolambda">--</code>
marks the end of our service's implementation.
</p>


<h1 id="variables">Variables <a href="#variables" class="anchor-link">🔗</a></h1>

<p>Many programming languages are centered around the concept of variables that keep track of specific values.
For example, when computing the circumference of a circule as <code>2πr</code> the radius of the circule
<code>r</code> may be stored in a variable and the result in yet another one.</p>

<p>Contrary to math, programming variables represent a specific outcome of computations:
their values remain set once computed and do not change automatically upon each other's changes. 
In <i>smoλ</i>, declaring a variable
is as simple as starting from a name that consists of some combination of letters, numbers, or underscores and
and using the equality symbol <code class="language-smolambda">=</code> to assign the outcome of some expression 
or constant. Variable names cannot start with a number and may not contain two concecutive underscores (this is reserved
for some special cases and the language will complain if you use it arbitrarily). 
An example of setting and using a variable is shown below.</p>


<pre><code class="language-smolambda">// main.s
@include std.builtins

service main()
    message = "Hello world!"
    print(message)
    --
</code></pre>
<pre style="background-color: #222; color: white;">> smol main.s
Hello world!
</pre>

<p>Normally, you cannot reassign a new value to already set variables in <i>smoλ</i>. 
In many languages we say that such variables are <i>immutable</i>. To be able to
modify set values you need to prepend the name with the <code class="language-smolambda">&</code>
symbol the first time you assing a value to it. It seems a bit bothersome to explicitly
declare which variables can be modified, but the reasons will become more obvious as we
progress through this tutorial; immutability brings logic safety and helps prevent many errors. 
Conversely, you need to pay special attention to variables marked for modification 
as they could be modified by called functions. An example of mofifying set values shown below.</p>

<pre><code class="language-smolambda">// main.s
@include std.builtins

service main()
    &message = "hello"
    print(message)
    message = "world"
    print(message)
    --
</code></pre>
<pre style="background-color: #222; color: white;">> smol main.s
hello
world
</pre>


<p>So far we only worked with printing some strings. But there are more types of
values built in the language And its standard library. You will also be able to 
define more types of variables later to give structure to complicated data. For 
now, let us see some other basic types.
</p>

<p>
First are integers, which are represented by writing some digits, like <code>0,42,128</code>.
These can be subject of arithmetic operations like <code>+-*/%</code>, where the last one is the
modulo operator. By default, integers in <i>smoλ</i> are represented with 64 bits and are <i>unsigned</i> in that
the representation maps them to non-negative ones. For example <code>...0010</code> in the binary
representation corresponds to the number <code>2</code>.</p>

<p>This type is commonly known as <code class="language-smolambda">u64</code>
and being the default makes it convenient to work with memory
while avoiding a whole host of errors. If an operation is invalid, for example if a larger integer
is subtracted from a smaller one like <code class="language-smolambda">0-1</code>
or if there is a division by zero, it makes the current service fail. Below is an 
example of working with unsigned integers.
</p>

<pre><code class="language-smolambda">// main.s
@include std.builtins

service main()
    x = 2
    y = 3
    print("Integer division of 2/3")
    print(x/y)
    --
</code></pre>
<pre style="background-color: #222; color: white;">> smol main.s
Integer division of 2/3
1
</pre>

<p>In many applications you will need to work with negative integers too, which in <i>smoλ</i> are often
reprsented with <i>signed</i> 64-bit representations referred to as <code class="language-smolambda">i64</code>; 
the sign is indicated by first bit, but negative numbers
are stored in what is known as two's complement, explaining which is perhaps too much detail for this tutorial. The
important point is that unsigned integers can represent numbers 
<code class="language-smolambda">0 upto 2^65-1</code> but signed ones
can represent numbers <code class="language-smolambda">-2^64 upto 2^64-1</code>.</p>

<p>
Signed integers have the same available operations as assigned ones, with the bonus that any subtraction is valid.
However, you can not natively represent them. Instead, you need to convert to unsigned counterparts to signed ones
by calling <code class="language-smolambda">i64(value)</code> or, with an equivalent notation that we will expalin
later <code class="language-smolambda">value:i64</code>. A similar call can convert back the representation per 
<code class="language-smolambda">u64(value)</code>. Below is an example of how to yield minus one. It is deliberately
a bit harder to work with negative numbers in this language by making it very explicit because they can be
very hard to debug if we are not careful. For example, you might accidentally add a negative number in some computation
where you would not consider that possible.
</p>


<pre><code class="language-smolambda">// main.s
@include std.builtins

service main()
    minus_one = 0:i64-1:i64
    print(minus_one)
    --
</code></pre>
<pre style="background-color: #222; color: white;">> smol main.s
-1
</pre>

<p>
We last visit floating point numbers. Raw numbers are designated by adding
a dot to separate between the integer and decimal part. For example, <code>3.14159</code> is a floating point
number. Again, 64 bits are used ot hold the repsentation, this time following the IEEE 754 standard, which
is typically accurate to 15-17 significant digits and <i>smoλ</i>. 
</p>
<p>
The float type is called <code class="language-smolambda">f64</code>
and there exist similar conversions between that and signed and unsigned integers. These conversions may lose
information. Importantly, <code>0</code> is an unsigned integer and <i>not</i> a float; 
its float counterpart is <code>0.0</code>. Furthermore, the IEEE 754 standard allows invalid operations like
division by zero and lets them yield positive infinity, negative infinity, or <code>NaN</code> (not a number) values.
Lack of error checking results of very performant floating point code.
</p>

<pre><code class="language-smolambda">// main.s
@include std.builtins

service main()
    x = 2.0
    y = 3.0
    print("Float division of 2/3")
    print(x/y)
    print("Is float division of 2/0 an infinity?")
    print(isinf(1.0/0.0))
    --
</code></pre>
<pre style="background-color: #222; color: white;">> smol main.s
Float division of 2/3
1.5
Is float division of 2/0 an infinity?
true
</pre>




</div>
<script src="vendor/prism/prism.min.js"></script>
<script>
Prism.languages.smolambda = {
  'comment': /\/\/.*/,
  'directive': {
    pattern: /@\w+/,
    alias: 'important'
  },
  'keyword': [
    {
      pattern: /\b(?:smo|service|if|else|elif|with|include|do|while|union|to|upto|lento|len|and|or)\b/,
      greedy: true
    },
    {
      pattern: /(?:\|\|\|->|\|\|->|\|\|--|\|->|\|--|->|--|:|&|=)/,
      greedy: true
    }
  ],
  'builtin': /\b(?:i64|u64|f64|ptr|str|buffer|main|copy|bool|not|cos|sin|tan|acos|asin|atan|pi|exp|log|pow|sqrt|add|mul|sub|div|nom)\b/,
  'punctuation': /[{}();,\[\]]/,
  'number': /\b\d+\b/,
  'string': {
    pattern: /"(?:\\.|[^"\\])*"/,
    greedy: true
  }
};
</script>
<script>
  document.querySelectorAll('a.anchor-link').forEach(a =>
    a.addEventListener('click', e => {
      if (location.hash === a.getAttribute('href')) e.preventDefault()
    })
  )
</script>


</body>
</html>
